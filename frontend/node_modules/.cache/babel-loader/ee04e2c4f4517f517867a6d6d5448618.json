{"remainingRequest":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/thread-loader/dist/cjs.js!/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/babel-loader/lib/index.js!/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/src/tools/axios.js","dependencies":[{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/src/tools/axios.js","mtime":1570790569477},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1570790663275},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1570790665071},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/babel-loader/lib/index.js","mtime":1570790663215}],"contextDependencies":[],"result":["import _typeof from \"/home/andrey/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/@babel/runtime-corejs2/helpers/esm/typeof\";\nimport axios from 'axios'; // /api/v1/ // :TODO change later\n\naxios.defaults.baseURL = \"\".concat(process.env.VUE_APP_SERVER_ADDRESS, \"/api/v\").concat(process.env.VUE_APP_VERSION_API); // axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n\naxios.defaults.headers.common['Content-Type'] = 'application/json';\naxios.defaults.headers.common['Access-Control-Allow-Credentials'] = 'true';\naxios.defaults.headers.common['Access-Control-Allow-Headers'] = 'Origin, X-Requested-With, Content-Type, Accept, Set-Cookie, *';\naxios.defaults.headers.common['Access-Control-Allow-Methods'] = 'GET,PUT,POST,DELETE,PATCH';\naxios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\naxios.interceptors.request.use(function (request) {\n  if (request.params === null || _typeof(request.params) !== 'object') {\n    request.params = {};\n  }\n\n  return request;\n});\n/**\n * Initialize middleware for axios interface\n * @param { Vue } app ApplicationElement\n */\n\nvar initMiddleWare = function initMiddleWare(app) {\n  var store = app.$store,\n      router = app.$router;\n  store.commit('addInterceptorsAxios', {\n    response: function response(_response) {\n      return _response;\n    },\n    error: function error(_error) {\n      console.log(_error);\n\n      if (_error.hasOwnProperty('response') && !!_error.response && _error.response.hasOwnProperty('status')) {\n        if (_error.response.status === 401) {\n          // not authorized\n          console.log(\"[middleWareAxios.js]: initMiddleWare(401): \", _error);\n          store.commit('Logout', router);\n        } else if (_error.response.status === 402) {\n          // denied access action\n          console.log(\"[middleWareAxios.js]: initMiddleWare(402): \", _error);\n        } else {\n          // other error\n          console.log(\"[middleWareAxios.js]: initMiddleWare(other): \", _error);\n        }\n      }\n\n      return Promise.reject(_error);\n    }\n  });\n};\n\nexport { axios, initMiddleWare };\nexport default axios;",{"version":3,"sources":["/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/src/tools/axios.js"],"names":["axios","defaults","baseURL","process","env","VUE_APP_SERVER_ADDRESS","VUE_APP_VERSION_API","headers","common","interceptors","request","use","params","initMiddleWare","app","store","$store","router","$router","commit","response","error","console","log","hasOwnProperty","status","Promise","reject"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;;AACAA,KAAK,CAACC,QAAN,CAAeC,OAAf,aAA6BC,OAAO,CAACC,GAAR,CAAYC,sBAAzC,mBAA0EF,OAAO,CAACC,GAAR,CAAYE,mBAAtF,E,CAEA;;AACAN,KAAK,CAACC,QAAN,CAAeM,OAAf,CAAuBC,MAAvB,CAA8B,cAA9B,IAAgD,kBAAhD;AACAR,KAAK,CAACC,QAAN,CAAeM,OAAf,CAAuBC,MAAvB,CAA8B,kCAA9B,IAAoE,MAApE;AACAR,KAAK,CAACC,QAAN,CAAeM,OAAf,CAAuBC,MAAvB,CAA8B,8BAA9B,IAAgE,+DAAhE;AACAR,KAAK,CAACC,QAAN,CAAeM,OAAf,CAAuBC,MAAvB,CAA8B,8BAA9B,IAAgE,2BAAhE;AACAR,KAAK,CAACC,QAAN,CAAeM,OAAf,CAAuBC,MAAvB,CAA8B,6BAA9B,IAA+D,GAA/D;AAEAR,KAAK,CAACS,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAD,OAAO,EAAI;AACtC,MAAIA,OAAO,CAACE,MAAR,KAAmB,IAAnB,IAA2B,QAAOF,OAAO,CAACE,MAAf,MAA0B,QAAzD,EAAmE;AAC/DF,IAAAA,OAAO,CAACE,MAAR,GAAiB,EAAjB;AACH;;AACD,SAAOF,OAAP;AACH,CALD;AAQA;;;;;AAIA,IAAMG,cAAc,GAAG,SAAjBA,cAAiB,CAASC,GAAT,EAAc;AACjC,MAAIC,KAAK,GAAGD,GAAG,CAACE,MAAhB;AAAA,MACIC,MAAM,GAAGH,GAAG,CAACI,OADjB;AAEAH,EAAAA,KAAK,CAACI,MAAN,CAAa,sBAAb,EAAqC;AACjCC,IAAAA,QAAQ,EAAE,kBAAAA,SAAQ,EAAI;AAAE,aAAOA,SAAP;AAAkB,KADT;AAEjCC,IAAAA,KAAK,EAAE,eAAAA,MAAK,EAAI;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,UAAIA,MAAK,CAACG,cAAN,CAAqB,UAArB,KAAoC,CAAC,CAACH,MAAK,CAACD,QAA5C,IAAwDC,MAAK,CAACD,QAAN,CAAeI,cAAf,CAA8B,QAA9B,CAA5D,EAAqG;AACjG,YAAIH,MAAK,CAACD,QAAN,CAAeK,MAAf,KAA0B,GAA9B,EAAmC;AAAyC;AACxEH,UAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ,EAA2DF,MAA3D;AACAN,UAAAA,KAAK,CAACI,MAAN,CAAa,QAAb,EAAuBF,MAAvB;AACH,SAHD,MAGO,IAAII,MAAK,CAACD,QAAN,CAAeK,MAAf,KAA0B,GAA9B,EAAmC;AAAkC;AACxEH,UAAAA,OAAO,CAACC,GAAR,CAAY,6CAAZ,EAA2DF,MAA3D;AACH,SAFM,MAEA;AAAqE;AACxEC,UAAAA,OAAO,CAACC,GAAR,CAAY,+CAAZ,EAA6DF,MAA7D;AACH;AACJ;;AACD,aAAOK,OAAO,CAACC,MAAR,CAAeN,MAAf,CAAP;AACH;AAfgC,GAArC;AAiBH,CApBD;;AAsBA,SACIrB,KADJ,EAEIa,cAFJ;AAMA,eAAeb,KAAf","sourcesContent":["import axios from 'axios';\n\n// /api/v1/ // :TODO change later\naxios.defaults.baseURL = `${ process.env.VUE_APP_SERVER_ADDRESS }/api/v${ process.env.VUE_APP_VERSION_API }`;\n\n// axios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\naxios.defaults.headers.common['Content-Type'] = 'application/json';\naxios.defaults.headers.common['Access-Control-Allow-Credentials'] = 'true';\naxios.defaults.headers.common['Access-Control-Allow-Headers'] = 'Origin, X-Requested-With, Content-Type, Accept, Set-Cookie, *';\naxios.defaults.headers.common['Access-Control-Allow-Methods'] = 'GET,PUT,POST,DELETE,PATCH';\naxios.defaults.headers.common['Access-Control-Allow-Origin'] = '*';\n\naxios.interceptors.request.use(request => {\n    if (request.params === null || typeof request.params !== 'object') {\n        request.params = {};\n    }\n    return request;\n});\n\n\n/**\n * Initialize middleware for axios interface\n * @param { Vue } app ApplicationElement\n */\nconst initMiddleWare = function(app) {\n    let store = app.$store,\n        router = app.$router;\n    store.commit('addInterceptorsAxios', {\n        response: response => { return response; },\n        error: error => {\n            console.log(error);\n            if (error.hasOwnProperty('response') && !!error.response && error.response.hasOwnProperty('status')) {\n                if (error.response.status === 401) {                                        // not authorized\n                    console.log(\"[middleWareAxios.js]: initMiddleWare(401): \", error);\n                    store.commit('Logout', router);\n                } else if (error.response.status === 402) {                                 // denied access action\n                    console.log(\"[middleWareAxios.js]: initMiddleWare(402): \", error);\n                } else {                                                                    // other error\n                    console.log(\"[middleWareAxios.js]: initMiddleWare(other): \", error);\n                }\n            }\n            return Promise.reject(error);\n        }\n    });\n};\n\nexport {\n    axios,\n    initMiddleWare\n}\n\n\nexport default axios;"]}]}