{"remainingRequest":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/thread-loader/dist/cjs.js!/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/babel-loader/lib/index.js!/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/src/components/sections/DynamicFieldsSection.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/src/components/sections/DynamicFieldsSection.vue","mtime":1570790569477},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1570790663275},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1570790665071},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/babel-loader/lib/index.js","mtime":1570790663215},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1570790663275},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/vue-loader/lib/index.js","mtime":1570790665183}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'DynamicFieldsSection',\n  componentName: 'DynamicFieldsSection',\n  props: {\n    value: {\n      type: Object,\n      default: null\n    },\n    fields: {\n      type: Array,\n      default: null\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      allFields: {\n        // path(@/components/fields/{...})\n        'input': 'InputComponent.vue',\n        // 'inputDate': 'InputDate.vue',\n        // 'inputImage': 'InputImage.vue',\n        'inputNumber': 'InputNumber.vue',\n        'select': 'SelectComponent.vue',\n        'textarea': 'TextareaComponent.vue'\n      },\n      curFields: [],\n      curComponents: {}\n    };\n  },\n  watch: {\n    fields: {\n      handler: function handler(newValue, oldValue) {\n        this.initializeStruct(newValue);\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    handleInput: function handleInput(type, name, event) {\n      console.log(\"[DynamicFieldsSection.vue]: handleInput: \", type, name, event);\n      var newValue = this.$panel.clone(this.value);\n      newValue[name] = event;\n      this.$emit('input', newValue);\n    },\n    loadComponent: function loadComponent(type) {\n      var _this = this;\n\n      return function (resolve) {\n        return require([\"../elements/fields/\".concat(_this.allFields[type])], resolve);\n      };\n    },\n    initializeStruct: function initializeStruct(struct) {\n      var _this2 = this;\n\n      console.log(struct);\n      var fields = [];\n      var components = [];\n\n      if (Object.prototype.toString.call(struct) !== '[object Array]') {\n        return;\n      }\n\n      struct.forEach(function (field) {\n        if (Object.prototype.toString.call(field) === '[object Object]' && field.hasOwnProperty('type') && _this2.allFields.hasOwnProperty(field.type)) {\n          if (components.indexOf(field.type) === -1) {\n            components.push(field.type);\n          }\n\n          if (!_this2.curComponents.hasOwnProperty(field.type)) {\n            var load = _this2.loadComponent(field.type);\n\n            _this2.curComponents[field.type] = load;\n          }\n\n          fields.push(field);\n        }\n      });\n      this.curFields = fields;\n      Object.keys(this.curComponents).forEach(function (key) {\n        if (components.indexOf(key) === -1) {\n          // old load component\n          delete _this2.curComponents[key];\n        }\n      });\n      components = null;\n    }\n  }\n};",{"version":3,"sources":["DynamicFieldsSection.vue"],"names":[],"mappings":"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","sourcesContent":["<template lang=\"pug\">\ndiv.dynamic-fields-section(v-if=\"!!fields && !!value\")\n    div.dynamic-flelds-section__content.width-max-limit\n        component.dynamic-fields-section__component(\n            v-for=\"(field, index) in curFields\"\n            :key=\"index\"\n            :is=\"curComponents[field.type]\"\n            v-model=\"value[field.name]\"\n            v-bind=\"field.options\"\n            @input=\"handleInput(field.type, field.name, $event)\"\n        )\n</template>\n\n<script>\nexport default {\n    name: 'DynamicFieldsSection',\n    componentName: 'DynamicFieldsSection',\n    props: {\n        value: {\n            type: Object,\n            default: null\n        },\n        fields: {\n            type: Array,\n            default: null\n        },\n        disabled: {\n            type: Boolean,\n            default: false\n        }\n    },\n    data() {\n        return {\n            allFields: {                // path(@/components/fields/{...})\n                'input': 'InputComponent.vue',\n                // 'inputDate': 'InputDate.vue',\n                // 'inputImage': 'InputImage.vue',\n                'inputNumber': 'InputNumber.vue',\n                'select': 'SelectComponent.vue',\n                'textarea': 'TextareaComponent.vue'\n            },\n            curFields: [],\n            curComponents: {}\n        };\n    },\n    watch: {\n        fields: {\n            handler(newValue, oldValue) {\n                this.initializeStruct(newValue);\n            },\n            immediate: true\n        }\n    },\n    methods: {\n        handleInput(type, name, event) {\n            console.log(\"[DynamicFieldsSection.vue]: handleInput: \", type, name, event);\n            let newValue = this.$panel.clone(this.value);\n            newValue[name] = event;\n            this.$emit('input', newValue);\n        },\n        loadComponent(type) {\n            return (resolve) => require([ `../elements/fields/${ this.allFields[type] }` ], resolve);\n        },\n        initializeStruct(struct) {\n            console.log(struct);\n            let fields = [];\n            let components = [];\n            if (Object.prototype.toString.call(struct) !== '[object Array]') {\n                return;\n            }\n            struct.forEach(field => {\n                if (Object.prototype.toString.call(field) === '[object Object]' &&\n                    field.hasOwnProperty('type') &&\n                    this.allFields.hasOwnProperty(field.type)) {\n                    if (components.indexOf(field.type) === -1) {\n                        components.push(field.type);\n                    }\n                    if (!this.curComponents.hasOwnProperty(field.type)) {\n                        let load = this.loadComponent(field.type);\n                        this.curComponents[field.type] = load;\n                    }\n                    fields.push(field);\n                }\n            })\n            this.curFields = fields;\n\n            Object.keys(this.curComponents).forEach(key => {\n                if (components.indexOf(key) === -1) {               // old load component\n                    delete this.curComponents[key];\n                }\n            });\n            components = null;\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\n.dynamic-fields-section {\n    & &__component {\n        padding: 0 20px 20px 20px;\n        width: calc(100% - 40px);\n    }\n}\n</style>"],"sourceRoot":"src/components/sections"}]}