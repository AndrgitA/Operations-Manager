{"remainingRequest":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/thread-loader/dist/cjs.js!/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/babel-loader/lib/index.js!/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/src/views/Scripts.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/src/views/Scripts.vue","mtime":1570712642289},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/andrey/Документы/Andrgit/Study/Golang/Operations-Manager/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TitlePage from '@/components/titles/TitlePage.vue';\nimport BlocksComponent from '@/components/elements/fields/BlocksComponent.vue';\nimport ScriptsPanel from '@/components/controlPanels/ScriptsPanel.vue';\nexport default {\n  name: 'PageScripts',\n  componentName: 'PageScripts',\n  components: {\n    TitlePage,\n    BlocksComponent,\n    ScriptsPanel\n  },\n\n  data() {\n    return {\n      optionsDraggable: {\n        handle: '.head-block__handlebar',\n        draggable: '.script-block'\n      },\n      isShowData: false,\n      originalMaterial: null,\n      material: {\n        blocks: []\n      }\n    };\n  },\n\n  computed: {\n    getTitleValue() {\n      return {\n        titleText: \"Скрипты для тестирования\",\n        titleInfo: \"(OS) Ubuntu 18.04.3 LTS\"\n      };\n    },\n\n    needSave() {\n      return !this.$panel.isEqual(this.material, this.originalMaterial);\n    }\n\n  },\n\n  created() {\n    this.fetchData();\n  },\n\n  methods: {\n    handleInput(key, value) {\n      this.material[key] = value;\n    },\n\n    handleEmitControl() {\n      console.log(\"[Scripts.vue]: handleEmitControl: \");\n      let data = this.setPositions(this.material.blocks);\n      data.map(block => {\n        if (block.status === 'NOT_CHANGED') {\n          block.status = 'UPDATE';\n        }\n\n        return block;\n      });\n      console.log(\"POST DATA: \", data);\n      this.putScripts(data);\n    },\n\n    putScripts(putData) {\n      console.log(\"[Scripts.vue]: putScripts: \", putData);\n      this.$store.state.axios.put('/scripts', putData).then(response => {\n        console.log('[Scripts.vue]: putScripts(response): ', response);\n\n        if (response.status === 200) {\n          this.$store.commit('addNotification', {\n            text: `${this.$t('$notifications.update_success')}`,\n            color: 'green'\n          });\n          this.fetchData();\n        }\n      }).catch(error => {\n        console.log('[Scripts.vue]: putScripts(error): ', error);\n      });\n    },\n\n    setPositions(values) {\n      let i = 0;\n      let array = values.map(block => {\n        block.position = i++;\n        return block;\n      });\n      return array;\n    },\n\n    getSortPosition(values) {\n      let result = this.$panel.clone(values);\n      result.sort((a, b) => {\n        if (a.position < b.position) return -1;\n        if (a.position > b.position) return 1;\n        return 0;\n      });\n      return result;\n    },\n\n    fetchData() {\n      this.$store.state.axios.get('/scripts').then(response => {\n        console.log(\"[Scripts.vue]: fetchData(response): \", response);\n\n        if (response.status === 200) {\n          let material = {\n            blocks: this.getSortPosition(response.data)\n          };\n          material.blocks.map(block => {\n            block.status = 'NOT_CHANGED';\n            return block;\n          });\n          this.material = material;\n          this.originalMaterial = this.$panel.clone(this.material);\n          this.isShowData = true;\n        }\n      }).catch(error => {\n        console.log(\"[Scripts.vue]: fetchData(error): \", error);\n      });\n    }\n\n  }\n};",{"version":3,"sources":["Scripts.vue"],"names":[],"mappings":"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","sourcesContent":["<template lang=\"pug\">\ndiv#page-scripts.scroll-containter.overflow-hidden-auto.back_cyan-1(v-if=\"isShowData\")\n    div.width-window.scripts__title\n        title-page.back_cyan-10(\n            :value=\"getTitleValue\"\n        )\n    div.width-window.scripts__content\n        div.panel-container\n            div.scripts__content-left.inline-block\n                div.scripts__section\n                    blocks-component(\n                        :value=\"material.blocks\"\n                        @input=\"handleInput('blocks', $event)\"\n                        :optionsDraggable=\"optionsDraggable\"\n                    )\n            div.scripts__content-right.scripts__panel-control.inline-block\n                scripts-panel(\n                    :title=\"$t('$controls.scripts')\"\n                    :count=\"material.blocks.length\"\n                    :needSave=\"needSave\"\n                    @onEmit=\"handleEmitControl\"\n                )\n</template>\n\n<script>\nimport TitlePage from '@/components/titles/TitlePage.vue';\nimport BlocksComponent from '@/components/elements/fields/BlocksComponent.vue';\n\nimport ScriptsPanel from '@/components/controlPanels/ScriptsPanel.vue';\n\nexport default {\n    name: 'PageScripts',\n    componentName: 'PageScripts',\n    components: {\n        TitlePage,\n        BlocksComponent,\n        ScriptsPanel\n    },\n    data() {\n        return {\n            optionsDraggable: {\n                handle: '.head-block__handlebar',\n                draggable: '.script-block',\n            },\n            isShowData: false,\n            originalMaterial: null,\n            material: {\n                blocks: []\n            }\n        };\n    },\n    computed: {\n        getTitleValue() {\n            return {\n                titleText: \"Скрипты для тестирования\",\n                titleInfo: \"(OS) Ubuntu 18.04.3 LTS\"\n            };\n        },\n        needSave() {\n            return !this.$panel.isEqual(this.material, this.originalMaterial);\n        }\n    },\n    created() {\n        this.fetchData();\n    },\n    methods: {\n        handleInput(key, value) {\n            this.material[key] = value;\n        },\n        handleEmitControl() {\n            console.log(\"[Scripts.vue]: handleEmitControl: \");\n            let data = this.setPositions(this.material.blocks);\n            data.map(block => {\n                if (block.status === 'NOT_CHANGED') {\n                    block.status = 'UPDATE';\n                }\n                return block;\n            });\n            console.log(\"POST DATA: \", data);\n            this.putScripts(data);\n        },\n        putScripts(putData) {\n            console.log(\"[Scripts.vue]: putScripts: \", putData);\n            this.$store.state.axios.put('/scripts', putData).then(response => {\n                console.log('[Scripts.vue]: putScripts(response): ', response);\n                if (response.status === 200) {\n                    this.$store.commit('addNotification', { \n                        text: `${ this.$t('$notifications.update_success') }`, \n                        color: 'green' \n                    });\n                    this.fetchData();\n                }\n            }).catch(error => {\n                console.log('[Scripts.vue]: putScripts(error): ', error);\n            })\n        },\n        setPositions(values) {\n            let i = 0;\n            let array = values.map(block => {\n                block.position = i++;\n                return block;\n            })\n            return array;\n        },\n        getSortPosition(values) {\n            let result = this.$panel.clone(values);\n            result.sort((a, b) => {\n                if (a.position < b.position) return -1;\n                if (a.position > b.position) return 1;\n                return 0;\n            });\n            return result;\n        },\n        fetchData() {\n            this.$store.state.axios.get('/scripts').then(response => {\n                console.log(\"[Scripts.vue]: fetchData(response): \", response);\n                if (response.status === 200){\n                    let material = { blocks: this.getSortPosition(response.data) };\n                    material.blocks.map(block => {\n                        block.status = 'NOT_CHANGED';\n                        return block;\n                    });\n                    this.material = material;\n                    this.originalMaterial = this.$panel.clone(this.material);\n                    this.isShowData = true;\n                }\n            }).catch(error => {\n                console.log(\"[Scripts.vue]: fetchData(error): \", error);\n            });\n        },\n\n    }\n\n}\n</script>\n\n<style lang=\"scss\">\n#page-scripts {\n    width: 100%;\n    height: calc(100vh - 60px);\n    box-sizing: border-box;\n    padding-bottom: 100px;\n    .scripts {\n        &__title {\n            position: -webkit-sticky; /* Required for Safari */\n            position: sticky;\n            top: -20px;\n            z-index: 100;\n        }\n        &__content {\n            width: 100%;\n            &-left {\n                width: 820px;\n            }\n            &-right {\n                width: 400px;\n                margin-left: 20px;\n                margin-top: 20px;\n            }\n        }\n        &__section {\n            margin-top: 20px;\n            width: 100%;\n            background-color: $white;\n        }\n        &__panel-control {\n            position: -webkit-sticky; /* Required for Safari */\n            position: sticky;\n            top: 100px;\n        }\n    }\n}\n</style>"],"sourceRoot":"src/views"}]}